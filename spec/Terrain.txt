Service: Terrain

Types: integer, boolean, enum TypeBloc { VIDE, TERRE, MUR, HERO, SORTIE_FERMEE, SORTIE_OUVERTE, ROCHER, DIAMANT }

Use: Bloc, Position

Observators:
	getLargeur : [Terrain] -> integer
	getHauteur : [Terrain] -> integer
	getBlocHero : [Terrain] -> Bloc
		pre getBlocHero(t) require isHeroVivant(t)
	getBlocSortie : [Terrain] -> Bloc
	getBloc : [Terrain] * integer * integer -> Bloc
	getBlocHaut : [Terrain] * Bloc -> Bloc
	getBlocBas : [Terrain] * Bloc -> Bloc
	getBlocGauche : [Terrain] * Bloc -> Bloc
	getBlocDroite : [Terrain] * Bloc -> Bloc
	getTypeBloc : [Terrain] * integer * integer -> TypeBloc
	getTypeBlocHaut : [TypeBloc] * Bloc -> TypeBloc
	getTypeBlocBas : [TypeBloc] * Bloc -> TypeBloc
	getTypeBlocGauche : [TypeBloc] * Bloc -> TypeBloc
	getTypeBlocDroite : [TypeBloc] * Bloc -> TypeBloc
	isDiamantsRestants : [Terrain] -> boolean
	isHeroVivant : [Terrain] -> boolean
	isSortieOuverte : [Terrain] -> boolean
	isJouable : [Terrain] -> boolean
	
Constructors:
	init : integer * integer -> [Terrain]
		pre init(l, h) require l > 0 ^ h > 0
	
Operators:
	setPosHero : [Terrain] * integer * integer -> [Terrain]
	setPosSortie : [Terrain] * integer * integer -> [Terrain]
	setTypeBloc : [Terrain] * integer * integer * TypeBloc -> [Terrain]
		
Observations:
	[invariants]
		isJouable(t) ={min} isHeroVivant(t) ^ 
							
		isHeroVivant(t) ={min} ∃x,y tq. getTypeBloc(t, x, y) = HERO
		isDiamantsRestants(t) ={min} ∃x,y tq. getTypeBloc(t, x, y) = DIAMANT
		isSortieOuverte(t) ={min} ∃x,y tq. getTypeBloc(t, x, y) = SORTIE_OUVERTE
		 
	[init]
		getLargeur(init(l,h)) = l
		getHauteur(init(l,h)) = h
		Position::getX(getPosHero(init(l,h)) ) = -1
		Position::getY(getPosHero(init(l,h)) ) = -1 Position::getX(getPosSortie(init(l,h)) ) = -1
		Position::getY(getPosSortie(init(l,h)) ) = -1
		
	[setPosHero]
		Position::getX(getPosHero(setPosHero(t,x,y))) = x
		Position::getY(getPosHero(setPosHero(t,x,y))) = y
	[setPosSortie]
		Position::getX(getPosSortie(setPosSortie(t,x,y))) = x
		Position::getY(getPosSortie(setPosSortie(t,x,y))) = y
	[ouvrirSortie]
		getTypeBloc(t, Position::getX(getPosSortie(t)), Position::getY(getPosSortie(t)) ) = SORTIE_OUVERTE
	[setTypeBloc]
		getTypeBloc(setTypeBloc(t,x,y,tb), x, y) = tb
